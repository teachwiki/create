function generatePdf({image:e,width:t,height:a}){const n=new PDFDocument({autoFirstPage:!1,info:{Creator:"BeFunky"}}),i=n.pipe(blobStream());let r;i.on("finish",()=>{self.postMessage(r())}),n.addPage({layout:"portrait",size:[t,a]}),getValidImageData(e).then(e=>{n.image(e,0,0,{width:t,height:a}),r=(()=>({type:"success",content:i.toBlob("application/pdf")}))}).catch(e=>{r=(()=>({type:"error",content:e}))}).then(()=>{n.end()})}function getValidImageData(e){return e instanceof ArrayBuffer?Promise.resolve(e):/^data:.+;base64,/.test(e)?Promise.resolve(e):e instanceof Blob?new Promise((t,a)=>{const n=new FileReader;n.addEventListener("load",()=>{t(n.result)},!1),n.onerror=(()=>a("Unable to read image Blob")),n.readAsArrayBuffer(e)}):Promise.reject("Invalid image")}importScripts("blob-stream.min.js","pdfkit-single-image-safari10-0.10.0.min.js"),onmessage=function(e){generatePdf(e.data)};
